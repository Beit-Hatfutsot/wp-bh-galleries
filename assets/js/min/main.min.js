/*! bh-galleries 2019-12-03 */

var $=jQuery,BH_main=function(){var i={},t={image_max_width:300,cols:"",col_width:""};i.init=function(){var i=$(".upload-form");$(document).on("click",".upload .content .camera, .upload .content .glyphicon-camera",function(){i.is(":visible")||$("html, body").animate({scrollTop:0},BH_general.params.duration),i.stop().slideToggle(BH_general.params.duration)}),$(document).on("click",".images-grid li.photo",function(){a($(this))}),$(document).on("click",".images-grid li.expanded .close-photo",function(){e()})};var a=function(s){if(s.hasClass("active"))e();else{e(),s.addClass("active");var n=document.createElement("li");n.className="expanded",n.style.display="none";var i=JSON.parse(s.attr("photo-data")),a='<div class="photo-image"><img src="'+i.image+'" alt="'+i.user_name+'" /></div><div class="photo-details">'+(i.title?"<h2>"+i.title+"</h2>":"")+'<div class="user-meta">'+_BH_General.strings.by_str+' <span class="user">'+i.user_name+'</span>, <span class="year">'+i.year+'</span></div><div class="photo-meta">'+(i.subjects_parents?'<div class="subjects">'+_BH_General.strings.subject_str+": "+i.subjects_parents+" |&nbsp;</div>":"")+'<div class="country">'+_BH_General.strings.country_str+": "+i.country+"</div></div>"+(i.description?'<div class="description">'+i.description+"</div>":"")+'</div><div class="close-photo"><span class="glyphicon glyphicon-remove"></span></div>';n.innerHTML=a,setTimeout(function(){$(".images-grid li.expanded").remove();var i=$(".images-grid ul li").index(s)+1,a=Math.ceil(i/t.cols),e=a*t.cols-1;e=e>$(".images-grid ul li").length-1?$(".images-grid ul li").length-1:e,$(".images-grid ul li:eq("+e+")").after(n),$(".images-grid li.expanded").slideDown(BH_general.params.duration),$("html, body").animate({scrollTop:a*t.col_width},BH_general.params.duration)},BH_general.params.duration)}},e=function(){$(".images-grid li.photo").removeClass("active"),$(".images-grid li.expanded").slideUp(BH_general.params.duration)};i.loaded=function(){$(".images-grid .loader").hide(),$(".images-grid ul").fadeIn(BH_general.params.duration),$(window).resize(s).resize()};var s=function(){var i=$(".images-grid").width();t.cols=Math.ceil(i/t.image_max_width),t.col_width=i/t.cols,$(".images-grid li.photo").width(t.col_width).height(t.col_width)};return i}();BH_main.init(),$(window).load(BH_main.loaded());