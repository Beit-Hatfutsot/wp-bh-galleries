/*! bh-galleries 2020-04-21 */

var $=jQuery,BH_main=function(){var i={},o={image_max_width:300,cols:"",col_width:""};i.init=function(){var i=$(".upload-form");$(document).on("click",".upload .content .camera, .upload .content .glyphicon-camera",function(){i.is(":visible")||$("html, body").animate({scrollTop:0},BH_general.params.duration),i.stop().slideToggle(BH_general.params.duration)}),$(document).on("click",".images-grid li.photo",function(){e($(this))}),$(document).on("click",".images-grid li.expanded .close-photo",function(){r()})};var e=function(s){if(s.hasClass("active"))r();else{r(),s.addClass("active");var l=document.createElement("li");l.className="expanded",l.style.display="none";var i=JSON.parse(s.attr("photo-data")),e=i.subjects_ids,a=e?t(e):"",n='<div class="photo-image"><img src="'+i.image+'" alt="'+i.user_name+'" /></div><div class="photo-details">'+(i.title?"<h2>"+i.title+"</h2>":"")+'<div class="user-meta">'+_BH_General.strings.by_str+' <span class="user">'+i.user_name+'</span>, <span class="year">'+i.year+'</span></div><div class="photo-meta">'+(i.subjects_parents?'<div class="subjects">'+_BH_General.strings.subject_str+": "+i.subjects+" |&nbsp;</div>":"")+'<div class="country">'+_BH_General.strings.country_str+": "+i.country+"</div></div>"+(i.description?'<div class="description">'+i.description+"</div>":"")+(a?'<div class="subjects-logos">'+a+"</div>":"")+'</div><div class="close-photo"><span class="glyphicon glyphicon-remove"></span></div>';l.innerHTML=n,setTimeout(function(){$(".images-grid li.expanded").remove();var i=$(".images-grid ul li").index(s)+1,e=Math.ceil(i/o.cols),a=e*o.cols-1;a=a>$(".images-grid ul li").length-1?$(".images-grid ul li").length-1:a,$(".images-grid ul li:eq("+a+")").after(l),$(".images-grid li.expanded").slideDown(BH_general.params.duration),$("html, body").animate({scrollTop:e*o.col_width},BH_general.params.duration)},BH_general.params.duration)}},t=function(i){var a="";return i&&$.each(i,function(i,e){e in _BH_General.subjects_logos&&_BH_General.subjects_logos[e].logos.length&&(a+='<ul id="subject-logos-'+e+'" class="subject-logos">',$.each(_BH_General.subjects_logos[e].logos,function(i,e){e.logo&&(a+="<li>",a+=e.link.length?'<a href="'+e.link+'" target="_blank">':"",a+='<img src="'+e.logo+'" />',a+=e.link.length?"</a>":"",a+="</li>")}),a+="</ul>")}),a},r=function(){$(".images-grid li.photo").removeClass("active"),$(".images-grid li.expanded").slideUp(BH_general.params.duration)};i.loaded=function(){$(".images-grid .loader").hide(),$(".images-grid ul").fadeIn(BH_general.params.duration),$(window).resize(a).resize()};var a=function(){var i=$(".images-grid").width();o.cols=Math.ceil(i/o.image_max_width),o.col_width=i/o.cols,$(".images-grid li.photo").width(o.col_width).height(o.col_width)};return i}();BH_main.init(),$(window).load(BH_main.loaded());